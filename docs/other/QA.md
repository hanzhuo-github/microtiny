---
lang: zh-CN
title: Quantitative Analysis
description:
article: false
date: 2023-09-07
---

## 1. 指标

### 1.1 Bollinger bands 布林线

布林线包括上中下三条轨道线。上-压力线、中-价格平均线、下-支撑线。

中轨：20日 MA

上轨：20日 MA + 2 * SD

下轨：20日 MA - 2 * SD

:::details 如何使用布林线呢？

内容来自 [布林带指标是什么？布林线指标怎么用](https://zhuanlan.zhihu.com/p/425790934)。

1. 当价格在中轨和上轨之间的区域运行时，只要价格不跌破中轨，说明市场处于多头（买入）行情中，价格趋势向上，此时的交易策略应该是**逢低买进，暂不考虑做空（卖出）** 

    当价格沿着布林上轨运行时，市场为单边上涨行情(稳定上涨)，持有多单的要守住，只要价格不脱离上轨区域就**耐心持有**。

2. 当价格在中轨和下轨之间的区域运行时，只要价格不冲破中轨，说明市场处于空头（卖出）行情中，价格趋势向下，此时我们的交易策略就是**逢高卖出，暂不考虑做多（买进）**。

    当价格沿着布林下轨运行时，市场为单边下跌行情(稳定下跌)，持有的空单的只要价格不脱离下轨，也是**耐心持有**。

3. 行情震荡并且有一定空间时，如果高点的连线与低点的连线形成基本平行，价格一般会围绕价格中轨来回运动。
    这时候可以高卖低买，在股价接近布林上轨时卖出，在股价接近布林下轨时买入，**高抛低吸反复操作**。

4. 当布林带通道收窄，价格会进入到一个狭窄的范围内振荡休整，振荡的价格区域会越来越小，这种状态往往是大行情（爆发性大幅上涨/下跌）要来临前的预兆，要采取的交易策略就是耐心等待。

    如果布林通道随即出现突然扩张，投资者就该观测好股价的突破方向，顺应行情做好交易的准备。如果股价向上突破则买入，向下突破则卖出。

    这种情况不常见，但却是很好的进场点，把握得好的话，**投资成功率很高**。

5. 在上涨趋势中，布林带的下轨会在趋势结束前收口，这个时候可以观察情况考虑**高位卖出**。
    在下跌趋势中，布林带的上轨会在趋势结束前收口，这个时候可以观察情况考虑**低位买入**。

6. **提防极端行情拐点**。

    当布林带上轨或者下轨开口达到**相当大的幅度**，如果股价格远远偏离了上轨或者下轨，也就是说当有至少两根K线的实体完全突破上轨或者完全跌破下轨时，就说明行情在短期内进入了超涨或者超跌状态。

7. 当股价在布林带内**宽幅震荡**时，如果市场上没有什么会影响股价的重要消息爆出，那么可以在股价触碰布林带上轨时卖出、触碰布林带下轨时买入，**高抛低吸**反复操作。
:::

:::details MA、SD
- Moving Average (MA) 滑动平均

    - 简单移动平均 Simple Moving Average
        $$
        {SMA}_{t} = \frac{P_1+P_2+...+P_n}{n}
        $$

        n 为时间周期
    - 加权滑动平均 Weighted Moving Average
        $$
        {WMA}_{t} = \frac{T{y_t} + (T-1){y_{t-1}}+...+2y_{t-T+2} + y_{t-T+1}}{T(T+1)/2}
        $$

        T 为时间周期
    - 指数移动平均 Exponential Moving Average
        $$
        EMA_t = \left\{ 
            \begin{aligned}
            &y_1 & & t=1 \cr 
            &\alpha y_t + (1-\alpha)EMA_{t-1} & & t>2
            \end{aligned}
        \right.
        $$

        其中 $\alpha \in (0, 1)$。表示权重的衰减程度。$\alpha$ 越大，表示过去的观测值衰减得越快。
        $$
        \alpha = \frac{2}{1+T}
        $$

        **T 是用来计算 $\alpha$ 的参数，它不表示指数衰减在 T 期后结束。**

- Standard Deviation (SD) 标准差
:::


### 1.2 Relative Strength Index (RSI) 相对强弱指数

利用平均收盘价上涨和下跌的幅度比较，从而确定市场的趋势和强度。


:::details 如何使用 RSI
1. 超买、超卖信号
    一般认为，当RSI超过70时，表示股票已经超买，可能会出现价格回调的机会；当RSI低于30时，表示股票已经超卖，可能会出现反弹的机会。

2. 转折信号RSI指标也可以提供价格趋势的转折信号。
    当RSI从超买区（通常是70以上）下跌并跌破50时，这可能是一个卖出信号。相反，当RSI从超卖区（通常是30以下）上涨并突破50时，这可能是一个买入信号。

3. 交叉信号：RSI指标的快线和慢线交叉也可以提供买入和卖出的信号。
    当RSI快线从下方向上突破RSI慢线时，这可能是一个买入信号。相反，当RSI快线从上方向下突破RSI慢线时，这可能是一个卖出信号。

4. 配合其他指标使用：为了增强RSI指标的有效性，投资者可以将其与其他技术指标结合使用。
    例如，结合移动平均线、布林带或成交量指标等，可以提高预测准确性，并进一步确认买卖信号。
:::

:::details 计算
- step 1: 计算平均收盘价上涨和下跌的幅度。

    平均收盘价上涨的幅度 = 当前收盘价 - 上一个交易日的收盘价

    平均收盘价下跌的幅度 = 上一个交易日的收盘价 - 当前收盘价

- step 2: 分别计算上涨日的平均涨幅（UM）和下跌日的平均跌幅（DM）
    - 首先计算每一天的涨幅和跌幅
    - 将所有上涨日的涨幅相加求平均得到 UM
    - 将所有下跌日的跌幅相加求平均得到 DM

- step 2: 计算相对强度（Relative Strength）
    $$
    RS = \frac{UM}{DM}
    $$

- step 3: 计算相对强弱指标（RSI）
    
    $$
    RSI = 100 -  \frac{100}{1+RS}
    $$

:::


### 1.3 Moving Average Convergence Divergence (MACD) 平滑异同移动平均线

利用短期（常用为12日）移动平均线与长期（常用为26日）移动平均线之间的聚合与分离状况，对买进、卖出时机作出研判的技术指标。

- DIF 线：快速线是由短期移动平均线（通常为12天）减去长期移动平均线（通常为26天）得出的差值。这条线代表了价格短期内的快速变化。

- DEA 线：慢速线是对快速线进行平滑处理得到的，通常采用9天的移动平均线。这条线用于平滑快速线的波动，并产生买入和卖出的信号。

- 柱状图：柱状图是快速线和慢速线之间的差值。当快速线向上突破慢速线时，柱状图为正值，表示买入信号；当快速线向下突破慢速线时，柱状图为负值，表示卖出信号。

:::details 如何使用 MACD
1. 趋势判断：当快速线向上穿过慢速线时，表示市场可能处于上升趋势；当快速线向下穿过慢速线时，表示市场可能处于下降趋势。
2. 交叉信号：当快速线和慢速线发生交叉时，产生信号。当快速线从下方向上穿过慢速线时，被称为“金叉”，可能预示价格上涨的可能性增加；当快速线从上方向下穿过慢速线时，被称为“死叉”，可能预示价格下跌的可能性增加。
3. 柱状图的变化：柱状图的正负值和变化趋势可以用来确认价格趋势的强弱和判断价格的超买超卖情况。正值表示买入信号的强度增加，负值表示卖出信号的强度增加。

MACD 具有滞后性，因此单独使用时可能会产生延迟的信号。结合其他技术指标和趋势分析工具，可以提高交易决策的准确性。

> 正因为 MACD 有滞后性，所以通常用它来看大级别，大级别的方向确定后，小级别的操作也就相对得心应手很多。
:::

:::details 计算

:::


### 1.4 On Balance Volume (OBV)

是一种基于成交量的技术分析工具，旨在衡量市场买入和卖出压力的相对强度。该指标通过将每个交易日的成交量与价格的变化结合起来，来判断市场趋势的可靠性和价格的持续性。

:::details 使用 OBV
1. 趋势确认：OBV指标与价格的趋势相一致时，可以确认当前趋势的可靠性。如果价格上涨且OBV也上涨，或者价格下跌且OBV也下跌，这表示市场参与者对当前趋势持续性的看法一致，趋势可能持续。

2. 背离信号：当价格形成高点或低点时，OBV指标却形成了相反的低点或高点，这被称为背离。背离通常暗示着趋势可能发生反转。

3. 量价分析：通过比较OBV指标和价格走势的差异，可以判断市场买入和卖出压力的强弱。如果价格上涨但OBV下跌，意味着买盘减少，可能提示价格上涨的动力减弱。
:::


:::details 计算
1. 如果当日的收盘价高于前一日的收盘价，则当日的成交量被视为买入量，将其加到前一日的OBV值上。

2. 如果当日的收盘价低于前一日的收盘价，则当日的成交量被视为卖出量，将其从前一日的OBV值中减去。

3. 如果当日的收盘价等于前一日的收盘价，则当日的成交量被视为无效，将其忽略不计。
:::


## 2. Python 库

Yahoo Finance、Quandl、alpha_vantage

算法交易：使用 Zipline、PyAlgoTrade 等库创建和回测交易策略。这些库提供了用于创建和测试交易算法以及优化参数和分析性能的工具。

投资组合管理：使用 PyPortfolioOpt、PortfolioLab 等库来管理和优化投资组合。这些库提供了资产配置、风险管理和绩效分析的工具，这对于有效的投资组合管理至关重要。