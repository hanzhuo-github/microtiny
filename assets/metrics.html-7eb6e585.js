import{_ as e}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as m,c as i,b as s,e as l,f as c,h as a}from"./app-7864f323.js";const r="/images/confusion_matrix.png",p={},o=s("p",null,"在评价一个二分类的机器学习模型的性能时，我们通常可以选择 Accuracy、Precision、Recall、F1 Score 等指标。",-1),u=s("p",null,"使用分类器做预测后，可以绘出混淆矩阵（Confusion Matrix）：",-1),h=s("p",null,[s("img",{src:r,alt:""})],-1),d=s("ul",null,[s("li",null,"True Positive (TP): 把正样本成功预测为正。"),s("li",null,"True Negative (TN)：把负样本成功预测为负。"),s("li",null,"False Positive (FP)：把负样本错误地预测为正。"),s("li",null,"False Negative (FN)：把正样本错误的预测为负。")],-1),g=s("h3",{id:"_1-准确性-accuracy",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#_1-准确性-accuracy","aria-hidden":"true"},"#"),l(" 1. 准确性 Accuracy")],-1),y=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"A"),s("mi",null,"c"),s("mi",null,"c"),s("mi",null,"u"),s("mi",null,"r"),s("mi",null,"a"),s("mi",null,"c"),s("mi",null,"y"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"T"),s("mi",null,"P"),s("mo",null,"+"),s("mi",null,"T"),s("mi",null,"N")]),s("mrow",null,[s("mi",null,"T"),s("mi",null,"P"),s("mo",null,"+"),s("mi",null,"T"),s("mi",null,"N"),s("mo",null,"+"),s("mi",null,"F"),s("mi",null,"P"),s("mo",null,"+"),s("mi",null,"F"),s("mi",null,"N")])])]),s("annotation",{encoding:"application/x-tex"}," Accuracy = \\frac{TP+TN}{TP+TN+FP+FN} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.8778em","vertical-align":"-0.1944em"}}),s("span",{class:"mord mathnormal"},"A"),s("span",{class:"mord mathnormal"},"cc"),s("span",{class:"mord mathnormal"},"u"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.02778em"}},"r"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"cy"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1297em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"TN"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"FP"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"FN")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"TN")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),k=a(`<div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metric <span class="token keyword">import</span> accuracy_score

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Accuracy: %.3f&#39;</span> <span class="token operator">%</span> accuracy_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-精确度-precision" tabindex="-1"><a class="header-anchor" href="#_2-精确度-precision" aria-hidden="true">#</a> 2. 精确度 Precision</h3>`,2),v=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"P"),s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"o"),s("mi",null,"n"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"T"),s("mi",null,"P")]),s("mrow",null,[s("mi",null,"T"),s("mi",null,"P"),s("mo",null,"+"),s("mi",null,"F"),s("mi",null,"P")])])]),s("annotation",{encoding:"application/x-tex"}," Precision = \\frac{TP}{TP+FP} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"mord mathnormal"},"rec"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1297em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"FP")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),_=a(`<ul><li>在预测为Positive的所有数据中，真实Positve的数据到底占多少</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metric <span class="token keyword">import</span> precision_score

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Precision: %.3f&#39;</span> <span class="token operator">%</span> precision_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-召回率-recall" tabindex="-1"><a class="header-anchor" href="#_3-召回率-recall" aria-hidden="true">#</a> 3. 召回率 Recall</h3>`,3),b=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"R"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"l"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mi",null,"T"),s("mi",null,"P")]),s("mrow",null,[s("mi",null,"T"),s("mi",null,"P"),s("mo",null,"+"),s("mi",null,"F"),s("mi",null,"N")])])]),s("annotation",{encoding:"application/x-tex"}," Recall = \\frac{TP}{TP+FN} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6944em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mathnormal"},"ec"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"ll"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1297em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3603em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.10903em"}},"FN")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"TP")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),P=a(`<ul><li>在所有的Positive数据中，到底有多少数据被成功预测为Positive</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metric <span class="token keyword">import</span> recall_score

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Recall: %.3f&#39;</span> <span class="token operator">%</span> recall_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-f1-分数-f1-score" tabindex="-1"><a class="header-anchor" href="#_4-f1-分数-f1-score" aria-hidden="true">#</a> 4. F1-分数 F1 Score</h3>`,3),f=s("p",{class:"katex-block"},[s("span",{class:"katex-display"},[s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},[s("semantics",null,[s("mrow",null,[s("mi",null,"F"),s("mn",null,"1"),s("mo",null,"−"),s("mi",null,"s"),s("mi",null,"c"),s("mi",null,"o"),s("mi",null,"r"),s("mi",null,"e"),s("mo",null,"="),s("mfrac",null,[s("mrow",null,[s("mn",null,"2"),s("mo",null,"×"),s("mi",null,"P"),s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"o"),s("mi",null,"n"),s("mo",null,"×"),s("mi",null,"R"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"l")]),s("mrow",null,[s("mi",null,"P"),s("mi",null,"r"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"i"),s("mi",null,"s"),s("mi",null,"i"),s("mi",null,"o"),s("mi",null,"n"),s("mo",null,"+"),s("mi",null,"R"),s("mi",null,"e"),s("mi",null,"c"),s("mi",null,"a"),s("mi",null,"l"),s("mi",null,"l")])])]),s("annotation",{encoding:"application/x-tex"}," F1-score = \\frac{2 \\times Precision \\times Recall}{Precision+Recall} ")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.7667em","vertical-align":"-0.0833em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"F"),s("span",{class:"mord"},"1"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"−"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.4306em"}}),s("span",{class:"mord mathnormal"},"score"),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),s("span",{class:"mrel"},"="),s("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),s("span",{class:"base"},[s("span",{class:"strut",style:{height:"2.1408em","vertical-align":"-0.7693em"}}),s("span",{class:"mord"},[s("span",{class:"mopen nulldelimiter"}),s("span",{class:"mfrac"},[s("span",{class:"vlist-t vlist-t2"},[s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"1.3714em"}},[s("span",{style:{top:"-2.314em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"mord mathnormal"},"rec"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"+"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mathnormal"},"ec"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"ll")])]),s("span",{style:{top:"-3.23em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"frac-line",style:{"border-bottom-width":"0.04em"}})]),s("span",{style:{top:"-3.677em"}},[s("span",{class:"pstrut",style:{height:"3em"}}),s("span",{class:"mord"},[s("span",{class:"mord"},"2"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"P"),s("span",{class:"mord mathnormal"},"rec"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"s"),s("span",{class:"mord mathnormal"},"i"),s("span",{class:"mord mathnormal"},"o"),s("span",{class:"mord mathnormal"},"n"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mbin"},"×"),s("span",{class:"mspace",style:{"margin-right":"0.2222em"}}),s("span",{class:"mord mathnormal",style:{"margin-right":"0.00773em"}},"R"),s("span",{class:"mord mathnormal"},"ec"),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"ll")])])]),s("span",{class:"vlist-s"},"​")]),s("span",{class:"vlist-r"},[s("span",{class:"vlist",style:{height:"0.7693em"}},[s("span")])])])]),s("span",{class:"mclose nulldelimiter"})])])])])])],-1),x=a(`<ul><li>F1 Score 是 Precision 和 Recall 的综合考量。它赋予Precision score和Recall Score相同的权重，以衡量其准确性方面的性能，使其成为准确性指标的替代方案。</li></ul><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>metric <span class="token keyword">import</span> f1_score

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Recall: %.3f&#39;</span> <span class="token operator">%</span> f1_score<span class="token punctuation">(</span>y_test<span class="token punctuation">,</span> y_pred<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="hint-container tip"><p class="hint-container-title">Recall v.s. Precision[^first]</p><ul><li>Recall &gt; Precision:</li></ul><p>当 FN 的成本代价很高，希望尽量避免产生 FN 时，应该着重考虑提高Recall指标。 例如，癌症诊断场景中，False Negative 是得了癌症的病人没有被诊断出癌症，这种情况是最应该避免的。我们宁可把健康人误诊为癌症 (FP)，也不能让真正患病的人检测不出癌症 (FN) 而耽误治疗离世。所以，癌症诊断系统的目标是：尽可能提高Recall值，哪怕牺牲一部分Precision。</p><ul><li>Precision &gt; Recall:</li></ul><p>当 FP 的成本代价很高，希望尽量避免产生 FP 时，应该着重考虑提高Precision指标。 例如，垃圾邮件分类时，垃圾邮件为Positive，正常邮件为 Negative，False Positive 是把正常邮件识别为垃圾邮件，这种情况是最应该避免的。我们宁可把垃圾邮件标记为正常邮件 (FN)，也不能让正常邮件直接进垃圾箱 (FP)。于是，垃圾邮件分类的目标是：尽可能提高Precision值，哪怕牺牲一部分recall。</p><p>继续以癌症诊断场景为，FP 是将没有患癌症的人诊断为癌症，虽然这不致命，但是会给患者带来麻烦</p></div><hr>`,4),w={href:"https://zhuanlan.zhihu.com/p/147663370",target:"_blank",rel:"noopener noreferrer"};function F(T,N){const n=t("ExternalLinkIcon");return m(),i("div",null,[o,u,h,d,g,y,k,v,_,b,P,f,x,s("p",null,[l("参考："),s("a",w,[l("多分类模型Accuracy, Precision, Recall和F1-score的超级无敌深入探讨"),c(n)])])])}const A=e(p,[["render",F],["__file","metrics.html.vue"]]);export{A as default};
